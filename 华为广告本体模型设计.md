# 华为广告本体模型设计

> 创建日期：2026-02-25
> 版本：v1.1

---

## 建模规范

| 类型 | 说明 | 示例 |
|------|------|------|
| 实体 Entity | 名词，表示可识别的事物 | 用户、APP、设备、广告主、计划、任务 |
| 关系 Relation | 实体之间的关联，不承载属性 | 用户 → 浏览 → 内容、用户 → 安装 → APP |
| 事件 Event | 关系的**强化形式**，用于需要记录属性明细的场景 | 浏览事件(记录时长/标签)、搜索事件(记录关键词) |
| 属性 Property | 实体的特征 | 年龄、性别、预算、标签 |

> **关系 vs 事件**：关系用于表达简单的关联（如"用户看过内容"），事件用于需要记录明细的场景（如"每次看了多久、什么时候看的"）。事件本质是"带属性的关系"。

---

## 一、用户概念（User）

### 1.1 用户画像 Profile

| 实体 | 说明 | 属性 |
|------|------|------|
| 用户 User | 华为设备用户 | 用户ID、设备ID |
| 用户画像 Profile | 人口属性 | 年龄、性别、职业、收入区间、婚姻状况 |
| 设备 Device | 用户设备 | 品牌(华为/荣耀)、型号、系统版本、屏幕尺寸、是否ROOT |

### 1.2 用户行为 Events

> 行为是**事件**（Event），不是实体。事件是发生在实体上的动作，记录每次行为的一条数据。

| 事件 | 说明 | 属性 | 覆盖率 |
|------|------|------|--------|
| APP安装 Install | 用户安装App | App名称、安装时间、来源(应用商店/广告/自然) | - |
| APP卸载 Uninstall | 用户卸载App | App名称、卸载时间、安装时长 | - |
| APP打开 Open | 用户打开App | App名称、打开时间 | - |
| APP使用 Usage | 用户使用App | App名称、使用开始时间、使用结束时间、单次使用时长 | - |
| 浏览事件 Browse | 用户浏览内容 | 内容类型、内容标签、浏览时长、浏览时间 | ~30% |
| 搜索事件 Search | 用户搜索关键词 | 搜索关键词、搜索时间 | ~30% |

> **注意**：覆盖率低的数据在特征计算时需标记为"未知"，避免算法误判"无行为"

### 1.3 用户场景

| 实体 | 说明 | 属性 |
|------|------|------|
| 用户场景 Context | 用户当前状态 | 场景类型、时间段、位置(在家/在公司/路上)、网络环境 |

---

## 二、广告概念（Ad）

### 2.1 账户体系

| 实体 | 说明 | 属性 |
|------|------|------|
| 广告主 Advertiser | 广告账户 | 企业名称、行业、账户余额、账户ID |
| 计划 Plan | 广告计划 | 预算、投放目标、出价方式、投放周期、状态 |
| 任务 Task | 广告任务(原广告组) | 名称、投放场景、人群定向、日预算、投放周期、状态 |

### 2.2 推广标的

| 实体 | 说明 | 类型 |
|------|------|------|
| 推广标的 Promotion Target | 广告推广的具体对象 | APP/商品/服务 |

**标的类型细分**：

| 类型 | 说明 | 示例 |
|------|------|------|
| APP | 应用程序 | 游戏、工具、社交App |

**APP属性细分**：

| 属性 | 说明 | 示例 |
|------|------|------|
| 应用名称 | App名称 | 抖音、微信、华为音乐 |
| 应用描述 | App功能简介 | "短视频社交平台" |
| 应用标签 | 分类/标签 | 娱乐、社交、工具、生活服务 |
| 应用分类 | 一级/二级分类 | 一级:工具,二级:天气 |
| 开发者 | App所属公司 | 字节跳动、腾讯 |
| 版本 | 当前版本号 | v3.5.2 |
| 下载量 | 累计下载次数 | 5000w+ |
| 评分 | 用户评分 | 4.5/5 |
| 商品 Goods | 实物商品 | 香水、包、汽车 |
| 服务 Service | 非实物服务 | 保险、理财、课程 |

### 2.3 投放策略

| 实体 | 说明 | 属性 |
|------|------|------|
| 转化目标 Conversion | 投放目标 | 目标名称(注册/下载/购买)、目标类型(浅层/深层)、期望CPA、关联行业 |
| 出价策略 Bidding | 出价设置 | 策略名称、出价方式(CPC/CPM/CPA/CPD)、出价金额、适用场景、适用行业 |

### 2.4 创意与行业

| 实体 | 说明 | 属性 |
|------|------|------|
| 创意 Creative | 广告素材 | 类型(图片/视频/文案)、尺寸、风格、落地页 |
| 行业 Industry | 广告所属行业 | 一级行业、二级行业 |

---

## 三、场景（Scene）

### 3.1 投放场景

| 场景 | 说明 | 流量特征 |
|------|------|----------|
| 开屏 Splash | App启动页 | 高曝光、低干扰 |
| 信息流 Feed | 内容穿插 | 原生沉浸 |
| 负一屏 | Huawei Card | 高转化 |
| 应用时长 In-App | App使用时长 | 长时间曝光 |
| 短信Push SMS | 短信通知 | 主动触达 |
| 小艺场景卡 Xiaoyi | 智能场景推荐 | 场景化精准 |

---

## 四、媒体数据（Media）

| 实体 | 说明 | 属性 |
|------|------|------|
| 媒体 Media | 合作媒体平台 | 媒体名称、媒体分类、DAU、用户画像 |
| 流量位 Ad Slot | 广告位 | 媒体名称、广告位名称、广告位类型、尺寸、可投放场景 |

---

## 五、实体关系图

```
┌─────────────────────────────────────────────────────────────────┐
│                          广告主                                  │
│     (企业名称、行业、账户余额)                                     │
└────────────────────┬────────────────────┬───────────────────────┘
                     │创建                │属于
                     ▼                    ▼
┌─────────────────────────────────────────────────────────────────┐
│                         计划                                     │
│              (预算、周期、出价方式)                               │
└────────────────────┬───────────────────────────────────────────┘
                     │包含
                     ▼
┌─────────────────────────────────────────────────────────────────┐
│                         任务                                     │
│   (名称、场景、人群、定向、日预算)      ┌── 转化目标(1..N)        │
│                                        ├── 出价策略(1)           │
│                                        ├── 推广标的(1..N)        │
│                                        └── 创意(N)              │
└─────────────────────────────────────────────────────────────────┘
                              │
              ┌───────────────┼───────────────┐
              ▼               ▼               ▼
           场景           媒体            人群
        (开屏/信息流)    (流量位)        (人群包)

┌─────────────────────────────────────────────────────────────────┐
│                         用户                                     │
│                      (用户ID、设备ID)                           │
└────┬──────────────┬──────────────┬──────────────┬───────────────┘
     │拥有           │产生          │处于          │使用
     ▼               ▼              ▼              ▼
  用户画像      APP行为        用户场景        设备
(年龄/性别)  (安装/卸载/    (时间段/      (华为/荣耀/
              打开/使用)     位置)         型号/系统)

     ┌─────────────────────────────────────────────────────────────┐
     │                    搜索/浏览事件                              │
     │    (覆盖率30%，特征计算时需标记为"未知")                      │
     └─────────────────────────────────────────────────────────────┘
```

---

## 六、核心关系

| 关系 | 描述 | 应用场景 |
|------|------|----------|
| 用户 → 拥有 → 用户画像 | 用户属性 | 定向投放 |
| 用户 → 产生 → 事件 | 用户行为(安装/使用/浏览/搜索) | 推荐算法 |
| 任务 → 投放 → 场景 | 场景选择 | 投放策略 |
| 任务 → 包含 → 转化目标 | 转化目标 | 出价优化 |
| 任务 → 包含 → 出价策略 | 出价策略 | 成本控制 |
| 任务 → 推广 → 标的 | 推广内容 | 创意匹配 |
| 标的 → 属于 → 行业 | 行业分类 | 归类统计 |

---

## 七、策略推荐规则（示例）

| 问题 | 推荐逻辑 |
|------|----------|
| 广告主应该投给哪些人？ | 行业相似广告主 → 表现好的人群 → 扩展定向 |
| 某个人应该投什么广告？ | 用户行为/兴趣 → 匹配行业标的 → 适合场景 → 出价最优任务 |
| 什么场景投放什么广告？ | 用户场景 → 匹配投放场景 → 推荐合适任务 |

---

## 八、数据覆盖说明

| 数据类型 | 覆盖率 | 处理方式 |
|----------|--------|----------|
| APP行为 | 较高 | 正常参与特征计算 |
| 用户画像 | 高 | 核心定向维度 |
| 搜索/浏览 | ~30% | 标记"未知"，作为补充信号 |

---

## 九、数据表映射（知识 + 能力层）

> 本节描述每个实体可获取的数据表，包括原始表和聚合表，以及统计类属性的设计。

### 9.1 用户行为事件数据

#### APP使用 Usage

**原始表**：`app_usage_events`（每次使用一条记录）

| 字段 | 类型 | 说明 |
|------|------|------|
| user_id | string | 用户ID |
| app_name | string | App名称 |
| start_time | timestamp | 开始使用时间 |
| end_time | timestamp | 结束使用时间 |
| duration_sec | int | 单次使用时长(秒) |

**聚合表**：`daily_app_usage`（每日一条）

| 字段 | 类型 | 说明 |
|------|------|------|
| user_id | string | 用户ID |
| app_name | string | App名称 |
| date | date | 日期 |
| total_duration_min | int | 当天累计使用时长(分钟) |
| open_count | int | 打开次数 |
| first_active_time | timestamp | 首次活跃时间 |
| last_active_time | timestamp | 最后活跃时间 |

---

#### 浏览行为 Browse

**原始表**：`browse_events`（每次浏览一条）

| 字段 | 类型 | 说明 |
|------|------|------|
| user_id | string | 用户ID |
| content_type | string | 内容类型(视频/图文/商品) |
| content_tags | json | 内容标签数组 |
| duration_sec | int | 浏览时长(秒) |
| browse_time | timestamp | 浏览时间 |

**聚合表**：`daily_browse_stats`

| 字段 | 类型 | 说明 |
|------|------|------|
| user_id | string | 用户ID |
| date | date | 日期 |
| total_browse_time_min | int | 当天累计浏览时长 |
| browse_count | int | 浏览次数 |
| top_content_types | json | 内容类型分布 |
| top_content_tags | json | 内容标签分布 |

---

#### 搜索行为 Search

**原始表**：`search_events`（每次搜索一条）

| 字段 | 类型 | 说明 |
|------|------|------|
| user_id | string | 用户ID |
| keyword | string | 搜索关键词 |
| search_time | timestamp | 搜索时间 |

**聚合表**：`daily_search_stats`

| 字段 | 类型 | 说明 |
|------|------|------|
| user_id | string | 用户ID |
| date | date | 日期 |
| search_count | int | 搜索次数 |
| top_keywords | json | 高频搜索词 |

---

### 9.2 广告投放数据

#### 任务 Task

**聚合表**：`task_daily_stats`（每日一条）

| 字段 | 类型 | 说明 |
|------|------|------|
| task_id | string | 任务ID |
| date | date | 日期 |
| impression | int | 曝光量 |
| click | int | 点击量 |
| conversion | int | 转化量 |
| cost | decimal | 消耗金额 |
| cpc | decimal | 平均点击成本 |
| cpm | decimal | 千次曝光成本 |
| cpa | decimal | 单转化成本 |
|ctr | decimal | 点击率 |
| cvr | decimal | 转化率 |

---

## 十、统计类属性设计

> 统计类属性是支撑大模型推理的关键。本节按实体分类，说明每个实体应设计哪些统计维度。

### 10.1 统计属性设计原则

| 维度 | 说明 | 示例 |
|------|------|------|
| 时间维度 | 不同时间范围的统计 | 今日、近7天、近30天、近90天 |
| 对比维度 | 与历史或整体对比 | 环比变化、同比变化、排名占比 |
| 分布维度 | 多维度分布情况 | 时段分布、内容类型分布、地域分布 |
| 派生标签 | 基于统计的标签化 | 高活跃/低活跃、上升趋势/下降趋势 |

### 10.2 用户行为事件统计属性

#### APP使用 Usage

| 统计属性 | 时间范围 | 计算方式 | 推理用途 |
|----------|----------|----------|----------|
| 累计使用时长 | 天/周/月 | sum(duration) | 判断用户对App依赖程度 |
| 使用天数 | 近7天/近30天 | count(distinct date) | 活跃度判断 |
| 使用频次 | 今日/近7天 | sum(open_count) | 使用频繁度 |
| 平均单次时长 | 近30天 | avg(duration) | 使用深度 |
| 最近使用距今 | 实时 | now - last_active_time | 流失风险 |
| 使用时段分布 | 实时 | hour分组统计 | 使用习惯(早/午/晚/凌晨) |
| 常用App排名 | 近7天/近30天 | 按时长排序 | 兴趣偏好 |
| App使用稳定性 | 近30天 | 方差/波动 | 用户类型(稳定/波动) |

**派生标签**：

| 标签 | 规则 | 说明 |
|------|------|------|
| 重度用户 | 近7天使用天数≥5天且日均≥60min | 高价值用户 |
| 中度用户 | 近7天使用天数3-4天 | 有潜力 |
| 轻度用户 | 近7天使用天数1-2天 | 需激活 |
| 沉默用户 | 近30天未使用 | 流失风险 |
| 夜间用户 | 23:00-06:00使用占比>50% | 特殊作息 |

#### 搜索行为 Search

| 统计属性 | 时间范围 | 推理用途 |
|----------|----------|----------|
| 搜索频次 | 今日/近7天 | 意图强度 |
| 高频关键词 | 近7天/近30天 | 兴趣方向 |
| 搜索类别分布 | 近30天 | 兴趣偏好结构 |
| 搜索时段 | 实时 | 即时需求 |

**派生标签**：

| 标签 | 规则 |
|------|------|
| 品类搜索者 | 搜索词含品类词(手机、耳机) |
| 价格敏感型 | 多次搜索"价格、多少钱、优惠" |
| 品牌忠诚型 | 重复搜索同一品牌 |

### 10.3 广告投放统计属性

#### 任务 Task

| 统计属性 | 时间范围 | 推理用途 |
|----------|----------|----------|
| 曝光量 | 今日/累计 | 投放规模 |
| 点击量 | 今日/累计 | 流量质量 |
| 转化量 | 今日/累计 | 转化效果 |
| 消耗金额 | 今日/累计 | 成本控制 |
| CTR | 实时 | 创意吸引力 |
| CVR | 实时 | 落地页/人群质量 |
| CPA | 实时 | 成本效率 |
| 预算消耗进度 | 实时 | 投放健康度 |
| 转化趋势 | 近7天/近30天 | 效果走势 |

**派生标签**：

| 标签 | 规则 |
|------|------|
| 高ROI | CPA < 期望CPA * 0.8 |
| 待优化 | CTR < 行业平均 * 0.7 |
| 预算耗尽 | 消耗进度 > 95% |
| 新任务 | 创建时间 < 7天 |

#### 标的 APP

| 统计属性 | 推理用途 |
|----------|----------|
| 被投放次数 | 广告主选择热度 |
| 平均CPA | 行业竞争程度 |
| 行业分布 | 适合哪些行业广告 |

---

### 10.4 统计属性查询示例

大模型推理时可按以下模式获取数据：

```
推理场景：判断用户是否对"短视频"感兴趣

查询步骤：
1. 查询 daily_app_usage
   - 条件: user_id=? AND date BETWEEN (NOW()-30d, NOW())
   - 字段: app_name, total_duration_min
2. 过滤标签含"短视频"的App
3. 计算:
   - 近30天短视频使用时长 = sum(符合条件的记录)
   - 占比 = 短视频时长 / 总时长
4. 派生结论:
   - 占比 > 30% → 标签: "短视频爱好者"
   - 占比 10%-30% → 标签: "短视频轻度用户"
   - 占比 < 10% → 标签: "非短视频用户"
```

---

## 十一、后续建议

1. **Bitable表结构**：可为每个主要实体创建独立的 Bitable 表
2. **数据更新**：定期同步最新数据
3. **算法接入**：基于本体构建特征工程
4. **查询服务**：开发自然语言转SQL的查询服务，供大模型运行时调用
